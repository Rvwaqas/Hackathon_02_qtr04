{{- if .Values.dapr.enabled }}
apiVersion: dapr.io/v1alpha1
kind: Component
metadata:
  name: statestore
  labels:
    {{- include "todo-chatbot.labels" . | nindent 4 }}
spec:
  type: state.postgresql
  version: v1
  metadata:
    - name: connectionString
      secretKeyRef:
        name: {{ include "todo-chatbot.fullname" . }}-secrets
        key: database-url
    - name: tableName
      value: "dapr_state"
  scopes:
    - {{ .Values.backend.dapr.appId }}
{{- end }}
